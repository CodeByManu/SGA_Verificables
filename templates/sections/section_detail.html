{% extends "base.html" %}
{% block content %}


<h2 class="text-2xl font-bold text-gray-800 mb-4">
    Section {{ section.section_number }} – {{ section.teacher.name }} 
</h2>

<div class="flex justify-between items-center mb-4">
    <a href="{{ url_for('get_period_detail', period_id=section.period.id) }}"
        class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded inline-flex items-center">          
             ← Back to {{ section.period.period }}
    </a>
    <a class="bg-teal-400 text-white px-4 py-2 rounded-lg hover:bg-teal-500 transition-colors cursor-pointer"
    onclick="openModal()">
     + Add Evaluation type
 </a>
</div>

<div class="mt-6">
    <div class="overflow-x-auto rounded-lg shadow-lg">
        <table class="min-w-full border-collapse">
            <thead class="bg-gray-100">
                <tr>
                    <th class="py-3 px-4 text-left text-gray-600 uppercase tracking-wide">Evaluations</th>
                    <th class="py-3 px-4 text-left text-gray-600 uppercase tracking-wide">Type</th>
                    <th class="py-3 px-4 text-left text-gray-600 uppercase tracking-wide">Value</th>
                    <th class="py-3 px-4 text-left text-gray-600 uppercase tracking-wide">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for evaluation in section.evaluations %}
                <tr class="border-t">
                    <td class="px-4 py-2">{{ evaluation.name }}</td>
                    <td class="px-4 py-2">{{ evaluation.tasks_weight_type }}</td>
                    <td class="px-4 py-2">{{ evaluation.weight }}</td>
                    <td class="px-4 py-2">
                        <form
                            method="POST"
                            action="{{ url_for('delete_evaluation', section_id=section.id, evaluation_id=evaluation.id) }}"
                            onsubmit="return confirm('Are you sure you want to delete this evaluation?');"
                        >
                            <button title="Delete" type="submit">
                                <i class="fa fa-trash-can text-red-500 hover:text-red-300 text-lg"></i>
                            </button>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" class="px-4 py-2 text-center text-gray-500">No evaluations added.</td>
                </tr>
                {% endfor %}
            </tbody>            
        </table>
    </div>
</div>





{% include "sections/modal_add_evaluation.html" %}
{% endblock %}

{% block scripts %}
<script>
    function openModal() {
        document.getElementById('modal').classList.remove('hidden');
    }

    function closeModal() {
        document.getElementById('modal').classList.add('hidden');
    }
</script>
{% endblock %}
